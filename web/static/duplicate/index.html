<!DOCTYPE html><html><head><link rel="stylesheet" type="text/css" href="/assets/lib/bootstrap/main/dist/css/bootstrap.min.css"><link rel="stylesheet" type="text/css" href="/assets/lib/@loadingio/bootstrap.ext/main/index.min.css"></head><body><div class="p-5"><h3>test: duplicated keys in list items</h3><p>Below 2 lists are updated, object list and string list.</p><p>In object list, following entries are added by order:</p><ol><li>initially: {key: 1, name: A}, {key: 1, name: B} with dup key 1. Only one of them (e.g., B) should be kept.</li><li>then, list is updated to {key: 1, name: A}. There should be only one item A.</li><li>then, list is updated to 3 items A, B, C with the same key 1. Still, Only one should be kept.</li></ol><p>In string list:</p><ol><li>initially <[A A]> is used. 2 items should be kept.</li><li>then, list is updated to <[A]>. There should be only one item.</li><li>then, <[A A A]> is used, which results in 3 items.</li></ol><hr><div class="d-flex g-4 flex-wrap"><div class="flex-grow-1"><div class="mb-2 font-weight-bold">object list</div><div class="d-flex g-4"><div class="d-flex g-2 p-2 rounded shadow-sm border" ld-each="item"><div class="btn-group"><div class="btn btn-outline-secondary">Key</div><div class="btn btn-outline-secondary" ld="key"></div></div><div class="btn-group"><div class="btn btn-outline-secondary">Name</div><div class="btn btn-outline-secondary" ld="name"></div></div></div></div></div><div class="flex-grow-1"><div class="mb-2 font-weight-bold">string list</div><div class="d-flex g-2"><div class="rounded px-3 py-2 border shadow-sm" ld-each="str"></div></div></div></div></div><script type="text/javascript" src="/assets/lib/@loadingio/debounce.js/main/index.min.js" defer></script><script type="text/javascript" src="/assets/lib/ldview/dev/index.min.js" defer></script><script type="module">var data,view;data={};view=new ldview({root:document.body,initRender:false,handler:{item:{list:function(){return data.list},key:function(e){return e.key},view:{text:{key:function(e){var t;t=e.ctx;return t.key},name:function(e){var t;t=e.ctx;return t.name}}}},str:{list:function(){return data.strList},view:{text:{"@":function(e){var t;t=e.ctx;return t}}}}}});Promise.resolve().then(function(){data.list=[{key:1,name:"A"},{key:1,name:"B"}];data.strList=["A","A"];return view.render()}).then(function(){return debounce(1e3)}).then(function(){data.list=[{key:1,name:"A"}];data.strList=["A"];return view.render()}).then(function(){return debounce(1e3)}).then(function(){data.list=[{key:1,name:"A"},{key:1,name:"B"},{key:1,name:"C"}];data.strList=["A","A","A"];return view.render()});</script></body></html>