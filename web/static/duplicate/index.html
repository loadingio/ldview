<!DOCTYPE html><html><head><link rel="stylesheet" type="text/css" href="/assets/lib/bootstrap/main/dist/css/bootstrap.min.css"><link rel="stylesheet" type="text/css" href="/assets/lib/@loadingio/bootstrap.ext/main/index.min.css"></head><body><div class="p-5"><h3>test: duplicated keys in list items</h3><p>Below 2 lists are updated, object list and string list.</p><p>In object list, following entries are added by order:</p><ol><li>initially: {key: 1, name: A}, {key: 1, name: B} with dup key 1. Only one of them (e.g., B) should be kept.</li><li>then, list is updated to {key: 1, name: A}. There should be only one item A.</li><li>then, list is updated to 3 items A, B, C with the same key 1. Still, Only one should be kept.</li></ol><p>In string list:</p><ol><li>initially <[A A]> is used. 2 items should be kept.</li><li>then, list is updated to <[A]>. There should be only one item.</li><li>then, <[A A A]> is used, which results in 3 items.</li></ol><hr><div class="d-flex g-4 flex-wrap"><div class="flex-grow-1"><div class="mb-2 font-weight-bold">click to toggle different steps.</div><div class="btn-group"><div class="btn btn-outline-secondary" ld="toggle" data-step="1">Step 1</div><div class="btn btn-outline-secondary" ld="toggle" data-step="2">Step 2</div><div class="btn btn-outline-secondary" ld="toggle" data-step="3">Step 3</div></div></div><div class="flex-grow-1"><div class="mb-2 font-weight-bold">object list</div><div class="d-flex g-4 flex-column"><div ld-each="item"><div class="btn-group"><div class="btn btn-outline-secondary">Key: <span ld="key"></span></div><div class="btn btn-outline-secondary">Name: <span ld="name"></span></div></div></div></div></div><div class="flex-grow-1"><div class="mb-2 font-weight-bold">string list</div><div class="d-flex g-2"><div class="rounded px-3 py-2 border shadow-sm" ld-each="str"></div></div></div></div></div><script type="text/javascript" src="/assets/lib/@loadingio/debounce.js/main/index.min.js" defer></script><script type="text/javascript" src="/assets/lib/ldview/dev/index.min.js" defer></script><script type="module">var data,view,steps;data={};view=new ldview({root:document.body,initRender:true,action:{click:{toggle:function(t){var e,n;e=t.node;n=e.dataset.step;return steps[n]()}}},handler:{item:{list:function(){return data.list||[]},key:function(t){return t.key},view:{text:{key:function(t){var e;e=t.ctx;return e.key},name:function(t){var e;e=t.ctx;return e.name}}}},str:{list:function(){return data.strList},view:{text:{"@":function(t){var e;e=t.ctx;return e}}}}}});steps={1:function(){data.list=[{key:1,name:"A"},{key:1,name:"B"}];data.strList=["A","A"];return view.render()},2:function(){data.list=[{key:1,name:"A"}];data.strList=["A"];return view.render()},3:function(){data.list=[{key:1,name:"A"},{key:1,name:"B"},{key:1,name:"C"}];data.strList=["A","A","A"];return view.render()}};</script></body></html>