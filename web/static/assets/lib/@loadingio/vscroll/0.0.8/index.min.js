(function(){var t,e;(t={}).fixed=function(t){return null==t&&(t={}),this.root=t.root,this.childNodes=Array.from(this.root.childNodes),this.init(),this},t.fixed.prototype=(e=Object.create(Object.prototype),e.init=function(){var t=this;return this.ph=[0,1].map(function(){return document.createElement("div")}).map(function(e){var i;return i=e.style,i.width="100%",i.height="0px",i.gridColumn="1 / -1",t.root.appendChild(e)}),this.root.addEventListener("scroll",function(){return t.locate()}),this.rbox={height:0}},e.setchild=function(t){var e;if(e=document.createElement("template"),e.innerHTML=t,this.childNodes=Array.from(e.content.childNodes),this.root.innerHTML="",this.ph[0].parentNode||this.root.insertBefore(this.ph[0],this.root.childNodes[0]),!this.ph[1].parentNode)return this.root.appendChild(this.ph[1])},e.update=function(t){var e,i,h,o,s,r,n,d,l;for(null==t&&(t=0),this.range=[1,0],this.row=1,this.count=1,this.range[0]=(e=this.range[0])<(i=this.childNodes.length-1)?e:i,this.range[1]=(e=this.range[1])<(i=this.childNodes.length-1)?e:i,h=0,o=this.childNodes.length;h<o;++h)s=h,this.childNodes[s].parentNode&&this.childNodes[s].parentNode.removeChild(this.childNodes[s]);for(r=(e=t||this.childNodes.length)<(i=this.childNodes.length)?e:i,h=0;h<r;++h)s=h,this.childNodes[s].parentNode||this.root.insertBefore(this.childNodes[s],this.ph[1]);for(this.ph[0].style.height=this.ph[1].style.height="0px",this.root.scrollTop=0,this.rbox=n=this.root.getBoundingClientRect(),d=void 0,h=0;h<r;++h)if(s=h,this.childNodes[s].nodeType===Node.ELEMENT_NODE)if(l=this.childNodes[s].getBoundingClientRect(),this.lineHeight=l.height,null==d)d=l.y;else{if(l.y!==d){this.lineHeight=l.y-d;break}this.count++}for(this.row=Math.ceil(4*n.height/(this.lineHeight||1)),this.delta=(e=this.row*this.count)>1?e:1,h=0;h<r;++h)s=h,this.childNodes[s].parentNode.removeChild(this.childNodes[s]);return this.locate()},e.locate=function(){var t,e,i,h,o,s,r,n,d,l,c,p,a,u,f,N,g;for(e=(t=[this.childNodes.length,this.delta,this.count,this.childNodes,this.lineHeight,this.root,this.ph,this.rbox,this.range])[0],i=t[1],h=t[2],o=t[3],s=t[4],r=t[5],n=t[6],d=t[7],l=t[8],n[0].parentNode||r.insertBefore(n[0],r.childNodes[0]),n[1].parentNode||r.appendChild(n[1]),c=(t=[e,-1])[0],p=t[1],a=0;i<0?a>e:a<e;a+=i)g={y:(f=(t=(u=a)+i-1)<(N=o.length-1)?t:N)/h*s,height:s},{y:u/h*s,height:s}.y-r.scrollTop<=1.5*d.height&&g.y+g.height-r.scrollTop>-.5*d.height&&(u<c&&(c=u),f>p&&(p=f));for(r.scrollTop>r.scrollHeight/2&&c===e&&-1===p&&(c=(t=[i*Math.floor(e/i),e-1])[0],p=t[1]),a=(t=l[0])>0?t:0;a<c;++a)o[u=a].parentNode&&o[u].parentNode.removeChild(o[u]);for(a=l[0]-1;a>=c;--a)o[u=a].parentNode||r.insertBefore(o[u],n[0].nextSibling);for(a=l[1];a>p;--a)o[u=a].parentNode&&o[u].parentNode.removeChild(o[u]);for(a=l[1]+1;a<=p;++a)o[u=a].parentNode||r.insertBefore(o[u],n[1]);return this.range=[c,p],n[0].style.height=s*((t=c/h)>0?t:0)+"px",n[1].style.height=s*Math.floor((e-p-1)/h)+"px"},e.appendChild=function(t){return this.childNodes.splice(this.childNodes.length,0,t)},e.insertBefore=function(t,e){var i;return(i=this.childNodes.indexOf(e))<0&&(i=this.childNodes.length),this.childNodes.splice(i,0,t)},e.removeChild=function(t){var e;if(~(e=this.childNodes.indexOf(t)))return this.childNodes.splice(e,1)},e),t.dummy=function(t){return null==t&&(t={}),this.root=t.root,this.childNodes=[],this},t.dummy.prototype=(e=Object.create(Object.prototype),e.appendChild=function(t){return this.childNodes.splice(this.childNodes.length,0,t),this.root.appendChild(t)},e.insertBefore=function(t,e){return this.childNodes.splice(this.childNodes.indexOf(e),0,t),this.root.insertBefore(t,e)},e.removeChild=function(t){var e;if(~(e=this.childNodes.indexOf(t)))return this.childNodes.splice(e,1),this.root.removeChild(t)},e),"undefined"!=typeof module&&null!==module?module.exports=t:"undefined"!=typeof window&&null!==window&&(window.vscroll=t)}).call(this);
